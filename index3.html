<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>TileViewer Example</title>
    <style>
      #viewer-container {
        position: relative;
        width: 800px;
        height: 600px;
        overflow: auto;
      }
    </style>
  </head>
  <body>
    <div id="viewer-container">
      <div id="viewer"></div>
    </div>
    <script src="src/lib/tileViewer.js"></script>
    <script>
      var params;
      //params = await(await fetch("http://127.0.0.1:8081/params.json")).json();

      // Create a new TileViewer instance with the URL of the tile images and the size of each tile
      const viewer = new TileViewer(
        document.getElementById("viewer"),
        "http://127.0.0.1:8081/tiles/{x}_{y}.jpg",
        1000,
        700
      );

      // Add an event listener to the viewer container to load new tiles when the view is scrolled or resized
      document
        .getElementById("viewer-container")
        .addEventListener("scroll", () => {
          viewer.loadTiles();
        });
      window.addEventListener("resize", () => {
        viewer.numTilesX = Math.ceil(
          viewer.container.clientWidth / viewer.tileSize
        );
        viewer.numTilesY = Math.ceil(
          viewer.container.clientHeight / viewer.tileSize
        );
        viewer.tilesContainer.style.width = `${
          viewer.numTilesX * viewer.tileSize
        }px`;
        viewer.tilesContainer.style.height = `${
          viewer.numTilesY * viewer.tileSize
        }px`;
        viewer.loadTiles();
      });
    </script>
  </body>
</html>
